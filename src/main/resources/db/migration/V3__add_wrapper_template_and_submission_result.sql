-- WrapperTemplate Table
CREATE TABLE wrapper_template (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    language VARCHAR(50) NOT NULL CHECK (language IN ('JAVA', 'PYTHON', 'C')),
    code TEXT NOT NULL,
    problem_id BIGINT NOT NULL,
    CONSTRAINT fk_wrapper_problem FOREIGN KEY (problem_id) REFERENCES problem(id) ON DELETE CASCADE
);

-- SubmissionResult Table
CREATE TABLE submission_result (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    passed BOOLEAN NOT NULL,
    actual_output TEXT,
    error_message TEXT,
    execution_time BIGINT,
    memory_used BIGINT,
    submission_id BIGINT NOT NULL,
    test_case_id BIGINT,

    CONSTRAINT fk_submission_result_submission FOREIGN KEY (submission_id)
        REFERENCES submission(id) ON DELETE CASCADE,

    CONSTRAINT fk_submission_result_test_case FOREIGN KEY (test_case_id)
        REFERENCES test_case(id) ON DELETE SET NULL
);
